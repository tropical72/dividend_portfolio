# Requirement: AI Advisor (04)

## [REQ-ADV-01] AI 어드바이저 통합 인터페이스
- **[REQ-ADV-01.1] 멀티 모델 지원:** Gemini 및 ChatGPT(GPT-4 등) API 연동 및 선택 기능 ([REQ-SYS-01.1] 참조).
- **[REQ-ADV-01.2] 독립 탭 제공:** 'AI 어드바이저' 전용 탭에서 대화형 인터페이스 제공.
- **[REQ-ADV-01.3] 모델 정보 표시:** 현재 사용 중인 모델 이름(예: Gemini Pro)을 UI에 명시.

## [REQ-ADV-02] 포트폴리오 분석 및 질문
- **[REQ-ADV-02.1] 분석 요청:** 현재 '포트폴리오' 탭의 데이터와 사용자 투자 목표를 결합하여 AI에 분석 요청.
- **[REQ-ADV-02.2] 투자 목표 입력:** 자유 텍스트 입력란 및 설정 기반 기본값 로드 기능 제공 ([REQ-SYS-01.4] 참조).
- **[REQ-ADV-02.3] 대화형 채팅:** 초기 분석 후 후속 질문이 가능한 채팅 인터페이스(입력창, 전송 버튼) 제공.

## [REQ-ADV-03] 결과 표시 및 UX
- **[REQ-ADV-03.1] Markdown 렌더링:** AI의 답변을 Markdown 형식으로 올바르게 렌더링하여 표시.
- **[REQ-ADV-03.2] 시각적 구분:** 
    - 사용자 질문(특정 색상)과 AI 답변을 명확히 구분.
    - 질문-답변 쌍에 순차적인 번호 부여.
- **[REQ-ADV-03.3] 비동기 처리:** API 요청 중 UI 프리징 방지 및 "응답 생성 중..." 표시기 노출 ([GS-UX-01] 준수).
- **[REQ-ADV-03.4] 친화적 에러 메시지:** API 할당량 초과 등 발생 시 기술적 문구 대신 쉬운 안내 메시지 표시.

## [REQ-ADV-04] 대화 기록 및 컨텍스트 관리
- **[REQ-ADV-04.1] 영속성 관리:** 대화 내용을 종료 시 자동 저장하고 재시작 시 복구.
- **[REQ-ADV-04.2] 슬라이딩 윈도우:** 초기 프롬프트와 최근 N개(예: 5쌍)의 대화만 전송하여 컨텍스트 및 비용 최적화.
- **[REQ-ADV-04.3] 대화 초기화:** '새 분석 시작' 버튼 클릭 시 이전 기록 삭제 및 초기화.

## Related Files
- `src/frontend/main.py` (AI Advisor 채팅 UI)
- `src/backend/api.py` (AI 서비스 연동 로직)
- `src/backend/storage.py` (chat_history.json 관리)
