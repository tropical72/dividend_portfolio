# Test: Watchlist (01)

## [Auto] 자동화 테스트 (pytest / Playwright)

### [Backend API Test]
- **[TEST-WCH-BE-01] CRUD 무결성:** 추가 -> 조회 -> 삭제 -> 조회 흐름 검증.
- **[TEST-WCH-BE-02] 중복/유효성:** 중복 티커(400), 미존재 티커(Fail 응답) 검증.
- **[TEST-WCH-BE-03] 데이터 필드 (REQ-WCH-03.1):** 9개 필수 필드 존재 및 타입 검증.
- **[TEST-WCH-BE-04] 삭제 보호 로직 (REQ-WCH-02.5):** 포트폴리오 사용 중 종목 삭제 시 403 에러 확인.
- **[TEST-WCH-BE-05] 배당 주기 분석 (REQ-WCH-03.2):** 종목별 배당 주기(월/분기 등) 데이터 추출 정확성 검증.

### [Frontend E2E Test]
- **[TEST-WCH-FE-01] 입력창 인터랙션:** Ticker 입력 후 Enter 시 추가 및 초기화 확인.
- **[TEST-WCH-FE-02] 로딩/알림 UX:** Adding... 상태 표시 및 Toast 메시지 노출/소멸 확인.
- **[TEST-WCH-FE-03] 테이블 명세 (REQ-WCH-03.1):** 9개 컬럼 헤더 및 데이터 바인딩 확인.
- **[TEST-WCH-FE-04] 정렬 기능 (REQ-WCH-03.3):** 헤더 클릭 시 데이터 정렬(오름/내림) 확인.
- **[TEST-WCH-FE-05] 배당 주기 노출:** 테이블 내 'Ex-Div' 또는 별도 컬럼에 주기 정보가 정확히 표시되는가?
- **[TEST-WCH-FE-06] 다중 선택 및 삭제:** 
    - 전체 선택 클릭 시 모든 행의 체크박스가 활성화되는가?
    - 'Delete Selected' 버튼 클릭 시 선택된 모든 종목이 한 번에 삭제되는가?

## [Regression] 결함 회귀 테스트 (Defect Verification)
- **[TEST-WCH-REG-01] 한국 데이터 DART 우선순위 (D-01)**
    - 상황: yfinance 데이터 부실로 인한 0.00 또는 "-" 표시 결함.
    - 검증: 한국 종목(.KS, .KQ) 추가 시 반드시 DART 기반으로 Monthly, Ex-Div, Last Amt가 유효한 값(Non-zero)을 가지는가?
- **[TEST-WCH-REG-02] 삭제 모달 포인터 위치 (D-02)**
    - 상황: 삭제 확인 모달이 마우스 위치와 너무 멀어 UX가 불편함.
    - 검증: 삭제 버튼 클릭 시 모달 박스가 마우스 클릭 좌표(x, y)를 기준으로 적절한 거리 내에 나타나는가?
- **[TEST-WCH-REG-03] 테이블 소팅 동작 (D-03)**
    - 상황: 헤더 클릭 시 정렬이 전혀 작동하지 않던 초기 상태.
    - 검증: 모든 컬럼 헤더 클릭 시 오름차순/내림차순 정렬이 실제 UI에 즉시 반영되는가?
- **[UX-WCH-01] 반응형 레이아웃:** 모바일 해상도에서 가로 스크롤 및 텍스트 생략(Truncate) 확인.
- **[UX-WCH-02] 삭제 확인 모달 (REQ-WCH-02.4):** 삭제 전 Confirm 팝업 노출 여부.
- **[UX-WCH-03] 자동 스크롤 (REQ-WCH-02.2):** 새 종목 추가 시 해당 위치로 부드러운 이동 확인.
- **[UX-WCH-04] 컨텍스트 메뉴 (REQ-WCH-01.2):** 우클릭 시 포트폴리오 이관 메뉴 노출 확인.
- **[UX-WCH-05] 금액 포맷팅 (GS-UI-01):** 원화 정수, 달러 소수점 2자리 및 천 단위 콤마 확인.
